<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정규표현식</title>
    <style>
        .area {
            background-color: lightgray;
            border: 2px solid black;
            padding: 5px;
            margin: 10px 0;
            min-height: 50px;
        }
    </style>
</head>
<body>
    <h1>정규표현식</h1>
    <!-- 
        Regular Expression
        - 특정 패턴(규칙)을 가진 문자열에 대한 표현식
        - 검색, 유효성 검사, 문자열 대체 등에 사용
        - 프로그래밍언어 독립적.
        - 간결하게 표현가능하지만, 문법자체의 숙지는 어려운 편.
    -->
    <button id="btn1">정규표현식객체</button>
    <script>
        btn1.addEventListener('click', () => {
            // 정규표현식 - 숫자를 의미
            const re1 = /[0-9]/g; // 이걸로 쓰자 제일 편하다.
            const re2 = new RegExp(/[0-9]/);
            const re3 = new RegExp("[0-9]");
            console.dir(re1);
            console.dir(re2);
            console.dir(re3);

            // RegExp#test(str) : boolean
            console.log(re1.test("abcde123"));
            console.log(re1.test("abcde"));

            // RegExp#exec(str) : [] - 매칭결과를 배열로 반환 / 많이 안쓰인다.
            console.log(re1.exec("abcde123"));
            
            // g플래그가 없으면 매칭된 첫번째 값만 반환 / 있으면 모든 결과 반환
            // String#match(re) : []
            console.log("abcde123".match(re1)); // ['1', '2, '3']

            // String#search(re) : number - 매칭된 첫번째 인덱스 반환
            console.log("abcde123".search(re1)); // 5

            // String#replace(re) : string - 변환된 문자열
            console.log("abcde123".replace(re1, "*")); // abcde***

            // String#split(re) : [] - 구분자로 문자열 쪼개서 배열반환
            console.log("a0b1c2d3e4".split(re1));

        });
    </script>
    <br><br>
    <button id="btn2">대체문자 $&</button>
    <div class="area" id="area2"></div>
    <script>
        /**
         * 정규표현식 매칭결과에 해당하는 문자
         */
        btn2.addEventListener('click', ()=>{
            const str = 'javascript jquery ajax css sass';
            // const re = /as/g;
            area2.innerHTML = `${str.replace(/as/, '<mark>$&</mark>')}<br>`;
            area2.innerHTML += `${str.replace(/as/g, '<mark>$&</mark>')}<br>`;
            area2.innerHTML += `${str.replace(/as/g, (str) => '<mark>' + str + '</mark>')}<br>`;
        });
    </script>

    <button id="btn3">flag</button>
    <div class="area" id="area3"></div>
    <script>
        /**
         * flag 정규표현식 실행옵션
         * - g global : 전역비교수행. g가 없다면 매칭된 1건만 처리
         * - i ignore : (영어만)대소문자 무시
         * - m multiline : 여러줄 문자열인 경우, 행단위 비교수행
         */
        btn3.addEventListener('click', () => {
            const str = 'Javascript JQuery Ajax sass'
            area3.innerHTML = `${str.replace(/a/, '<mark>$&</mark>')}<br>`
            area3.innerHTML += `${str.replace(/a/g, '<mark>$&</mark>')}<br>`
            area3.innerHTML += `${str.replace(/a/gi, '<mark>$&</mark>')}<br>`
        });
    </script>

    <button id="btn4">anchor</button>
    <div class="area" id="area4"></div>
    <script>
        /**
         * anchor
         * ^ 문자열의 시작
         * $ 문자열의 끝
         */
        btn4.addEventListener('click', () => {
            const str = 'Javascript xxx jQuery ajax'
            area4.innerHTML = `${str.replace(/j/g, '<mark>$&</mark>')}<br>`;
            area4.innerHTML += `${str.replace(/^j/gi, '<mark>$&</mark>')}<br>`;
            area4.innerHTML += `${str.replace(/x/gi, '<mark>$&</mark>')}<br>`;
            area4.innerHTML += `${str.replace(/x$/gi, '<mark>$&</mark>')}<br>`;
            const str2 = `Javascript
    xxx
    jQuery
    ajax`;
            area4.innerHTML += `${str2.replace(/^j/gim, '<mark>$&</mark>')}<br>`;
            area4.innerHTML += `${str2.replace(/x$/gim, '<mark>$&</mark>')}<br>`;
        });


    </script>

    <button id="btn5">.</button>
    <script>
        /**
         * . 임의의 한문자
         * - 모든 문자 (개행문자는 제외)
         */
        btn5.addEventListener('click', ()=>{
            const re = /^a.b/;
            console.log('acb', re.test('acb')); // true
            console.log('acba', re.test('acba')); // true
            console.log('ab', re.test('ab')); // false
            console.log('a b', re.test('a b')); // true
            console.log('a-b', re.test('a-b')); // true
            console.log('a\nb', re.test('a\nb')); // false

            // 다음 결과가 나올 수 있는 정규식 작성 - in다음 한글자가 나오고 끝나는 문자열
            const re2 = /in.$/;
            console.log(re2.test("going")); // true
            console.log(re2.test("I'm in.")); // true
            console.log(re2.test("inner")); // false
            console.log(re2.test("holidayin")); // false
        })
    </script>
    <br><br>
    <button id="btn6">[]</button>
    <div class="area" id="area6"></div>
    <script>
        /**
         * []
         * - 한글자의 값목록
         * - 아스키코드에 근거해 범위를 제시(1-0, A-z)
         * - [^] carot을 사용하면 해당문자 제외를 의미
         */
        btn6.addEventListener('click', ()=>{
            const str = "Javascript jQuery Ajax 1234567890 안녕 ㄱㄴㄷ ㅏㅔㅑㅐㅜ";

            area6.innerHTML = `${str.replace(/[aj]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[aj]/gi, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[AaJj]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[^aj]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqlstuvwxyz]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[a-zA-Z]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[0123456789]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[0-9]/g, '<mark>$&</mark>')}<br>`
            area6.innerHTML += `${str.replace(/[가-힣ㄱ-하-ㅣ]/g, '<mark>$&</mark>')}<br>`

            // 알파벳 소문자로 시작하는 문자열인지 검사하는 정규식
            const re1 = /^[a-z]/;
            console.log(re1.test("abcde")); // true
            console.log(re1.test("aㅏㅏㅏㅏㅏㅏㅏ")); // true
            console.log(re1.test("123abc")); // false
            console.log(re1.test("가나다")); // false
            console.log(re1.test("Aㅏㅏㅏㅏㅏㅏㅏ")); // false
            console.log(re1.test("ㄱaaaaaaaaa")); // false

            // 숫자 4자리인지 검사하는 정규식
            console.log("----------------------------");
            const re2 = /^[0-9][0-9][0-9][0-9]$/;
            console.log(re2.test("1234")); // true
            console.log(re2.test("123456")); // false
            console.log(re2.test("12ab")); // false
            console.log(re2.test("369")); // false


        })
    </script>
</body>
</html>